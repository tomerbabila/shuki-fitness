<div class="dashboard-container">
  <div class="actions-container" *ngIf="authService.canEditAndWrite()">
    <button mat-raised-button (click)="createWorkout()">Create workout</button>
  </div>

  <mat-card
    class="card-container"
    *ngFor="let workout of workoutStore.workouts$ | async">
    <mat-card-header class="header-container">
      <mat-card-title class="typography-heading-secondary">
        {{ workout.title }}
      </mat-card-title>
      <button
        mat-button
        *ngIf="!authService.canEditAndWrite()"
        (click)="openPopover()">
        <app-icon name="arrow_right"></app-icon>
      </button>
    </mat-card-header>
    <mat-card-content class="content-container">
      <mat-card class="detail-container">
        <app-icon name="three_user" size="lg"></app-icon>
        <span class="typography-body">
          {{ workout.currentMembers }} / {{ workout.totalMembers }}
        </span>
      </mat-card>
      <mat-card class="detail-container">
        <app-icon name="calendar" size="lg"></app-icon>
        <div class="time-container">
          <span class="typography-body">
            {{ workout.date.toDate() | date: 'shortDate' }}
          </span>
          <span class="typography-body">
            {{ workout.date.toDate() | date: 'shortTime' }}
          </span>
        </div>
      </mat-card>
    </mat-card-content>
    <mat-card-footer *ngIf="authService.canEditAndWrite()">
      <button mat-button color="primary" (click)="openPopover()">
        <app-icon name="edit"></app-icon>
      </button>
      <button mat-button color="warn" (click)="deleteWorkout(workout.id)">
        <app-icon name="delete"></app-icon>
      </button>
      <mat-slide-toggle
        [(ngModel)]="workout.visible"
        (change)="changeWorkoutVisibility(workout.id, workout.visible)">
        visible
      </mat-slide-toggle>
    </mat-card-footer>
  </mat-card>
</div>
